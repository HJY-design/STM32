一个基于STM32F103C8T6的完整入侵检测与响应系统，具备自动检测、多重控制和实时状态显示功能。

🚀 项目概述
本项目实现了一个智能安防系统，当检测到入侵时自动触发警报机制，包括关闭物理屏障、启动警示装置，并通过多种方式提供状态反馈。

✨ 核心功能
🔍 入侵检测
红外传感器实时监测 - 对射式红外传感器检测入侵
自动状态切换 - 检测到入侵立即进入警报模式
入侵次数统计 - 自动记录并显示总入侵次数

🎮 多重控制方式
自动模式 - 红外传感器自动触发
手动控制 - 物理按键控制电机和舵机
远程控制 - 串口命令控制（数字1-6）
状态显示 - OLED实时显示系统状态

🛡️ 响应机制
物理屏障 - SG90舵机模拟门禁开关
声音警报 - 直流电机带动风扇模拟警报
视觉指示 - LED状态指示灯
实时反馈 - 串口通信状态报告

🛠️ 硬件组件
组件	型号	功能
主控芯片	STM32F103C8T6	系统核心处理器
电机驱动	TB6612FNG	直流电机驱动
舵机	SG90	模拟物理屏障
显示屏	0.96寸OLED	I2C接口状态显示
传感器	红外对管	入侵检测
电机	直流电机+风扇	警报装置
📋 硬件连接
引脚分配表
STM32引脚	连接组件	功能
PA0	舵机信号线	PWM控制 (TIM2_CH1)
PA3	红外传感器DO	数字输入
PA4	TB6612 AIN1	电机方向控制1
PA5	TB6612 AIN2	电机方向控制2
PA6	TB6612 PWMA	电机PWM速度控制 (TIM3_CH1)
PA7	TB6612 STBY	电机驱动使能
PB1	按键1	电机控制
PB11	按键2	舵机控制
PA1	LED1	警报状态指示
PA2	LED2	备用指示
PB8	OLED SCL	I2C时钟
PB9	OLED SDA	I2C数据
PA9	USART1 TX	串口发送
PA10	USART1 RX	串口接收
💻 软件架构
模块化设计
text
Core/
├── main.c              # 主程序逻辑
├── System_Init()       # 系统初始化
└── OLED_DisplayStatus() # 状态显示

Drivers/
├── Delay.c/h           # 精确延时
├── Key.c/h             # 按键检测
├── LED.c/h             # LED控制
├── OLED.c/h            # 显示驱动
├── Infrared.c/h        # 红外传感器
├── Servo.c/h           # 舵机控制
├── Motor.c/h           # 电机驱动
└── UART.c/h            # 串口通信
关键特性
模块化设计 - 每个硬件独立驱动，便于维护
实时响应 - 中断处理+主循环检测
多重控制 - 支持自动/手动/远程控制
状态管理 - 完整的系统状态机

🎯 使用说明
系统启动
上电后系统自动初始化
OLED显示初始状态：
System: Ready
Status: Safe  
Alerts: 0
舵机打开至90°位置，电机停止
自动模式
正常状态：红外畅通，系统待机
入侵检测：红外被遮挡，触发警报
舵机关闭(0°)
电机启动(80%速度)
LED指示灯亮起
入侵计数+1
手动控制
按键1：切换电机启动/停止
按键2：切换舵机打开/关闭

串口控制
通过串口调试助手发送单个数字命令：
命令	功能	响应
1	启动电机	1: Motor ON
2	停止电机	2: Motor OFF
3	舵机打开	3: Servo OPEN
4	舵机关闭	4: Servo CLOSE
5	重置计数	5: Alert count RESET
6	查看状态	6: System STATUS
串口参数：9600波特率，8数据位，1停止位，无校验

🔧 编译与下载
开发环境
IDE: Keil MDK v5
编译器: ARMCC V5.06
调试器: ST-Link

编译步骤
导入项目到Keil MDK
确保所有源文件已添加到项目
设置正确的芯片型号(STM32F103C8T6)
配置Flash下载算法
编译并下载到目标板

📁 项目结构
text
STM32-Security-System/
├── README.md           # 项目说明
├── Firmware/           # 固件代码
│   ├── Core/           # 核心逻辑
│   ├── Drivers/        # 硬件驱动
│   └── Libraries/      # 库文件
├── Hardware/           # 硬件设计
│   ├── Schematic/      # 电路原理图
│   └── PCB/           # PCB设计文件
├── Docs/              # 文档资料
│   ├── Pinout.md      # 引脚分配
│   └── Demo.md        # 演示说明
└── Images/            # 项目图片

🛠️ 故障排除
常见问题
电机不转动
检查TB6612 VM电源(7-12V)
确认STBY引脚为高电平
验证AIN1/AIN2电平组合
舵机不响应
检查舵机电源(建议外部5V)
确认PWM信号连接正确
验证PWM脉宽范围(0.5ms-2.5ms)
红外传感器误触发
调节传感器上电位器灵敏度
检查环境光线干扰
确认传感器对准
串口通信失败
检查TX/RX交叉连接
确认波特率设置(9600)
验证串口驱动安装

🙏 致谢
感谢瀚海团队提供的题目和指导
基于STM32标准外设库开发
使用Keil MDK开发环境
⭐ 如果这个项目对你有帮助，请给它一个Star！

最后更新: 2025年11月

